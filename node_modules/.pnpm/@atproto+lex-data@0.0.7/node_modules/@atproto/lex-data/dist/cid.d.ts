import { CID } from 'multiformats/cid';
export declare const DAG_CBOR_MULTICODEC = 113;
export type DAG_CBOR_MULTICODEC = typeof DAG_CBOR_MULTICODEC;
export declare const RAW_MULTICODEC = 85;
export type RAW_MULTICODEC = typeof RAW_MULTICODEC;
export declare const SHA256_MULTIHASH: 18;
export type SHA256_MULTIHASH = typeof SHA256_MULTIHASH;
export type MultihashDigest<Code extends number = number> = {
    code: Code;
    digest: Uint8Array;
    size: number;
    bytes: Uint8Array;
};
declare module 'multiformats/cid' {
    /**
     * @deprecated use the {@link Cid} interface from `@atproto/lex-data`, and
     * related helpers ({@link isCid}, {@link ifCid}, {@link asCid},
     * {@link parseCid}, {@link decodeCid}), instead.
     *
     * This is marked as deprecated because we want to discourage direct usage of
     * `multiformats/cid` in dependent packages, and instead have them rely on the
     * {@link Cid} interface from `@atproto/lex-data`. The {@link CID} class from
     * `multiformats` version <10 has compatibility issues with certain TypeScript
     * configuration, which can lead to type errors in dependent packages.
     *
     * We are stuck with version 9 because `@atproto` packages did not drop
     * CommonJS support yet, and multiformats version 10 only supports ES modules.
     *
     * In order to avoid compatibility issues, while preparing for future breaking
     * changes (CID in multiformats v10+ has a slightly different interface), as
     * we update or swap out `multiformats`, we provide our own stable {@link Cid}
     * interface.
     */
    interface CID {
    }
}
export { CID };
/**
 * Interface for working with decoded CID string, compatible with
 * {@link CID} implementation.
 */
export interface Cid {
    version: 0 | 1;
    code: number;
    multihash: MultihashDigest;
    bytes: Uint8Array;
    equals(other: unknown): boolean;
    toString(): string;
}
/**
 * Represents the cid of raw binary data (like media blobs).
 * @see {@link https://atproto.com/specs/data-model#link-and-cid-formats ATproto Data Model - Link and CID Formats}
 */
export interface RawCid extends Cid {
    version: 1;
    code: RAW_MULTICODEC;
}
export declare function isRawCid(cid: Cid): cid is RawCid;
/**
 * Represents a DASL compliant CID.
 * @see {@link https://dasl.ing/cid.html DASL-CIDs}
 */
export interface DaslCid extends Cid {
    version: 1;
    code: RAW_MULTICODEC | DAG_CBOR_MULTICODEC;
    multihash: MultihashDigest<SHA256_MULTIHASH>;
}
export declare function isDaslCid(cid: Cid): cid is DaslCid;
/**
 * Represents the cid of ATProto DAG-CBOR data (like repository MST nodes).
 * @see {@link https://atproto.com/specs/data-model#link-and-cid-formats ATproto Data Model - Link and CID Formats}
 */
export interface CborCid extends DaslCid {
    code: DAG_CBOR_MULTICODEC;
}
export declare function isCborCid(cid: Cid): cid is CborCid;
export type CidCheckOptions = {
    flavor?: 'raw' | 'cbor' | 'dasl';
};
export type InferCheckedCid<TOptions> = TOptions extends {
    flavor: 'raw';
} ? RawCid : TOptions extends {
    flavor: 'cbor';
} ? CborCid : Cid;
/**
 * Coerces the input value to a Cid, or returns null if not possible.
 */
export declare function ifCid<TOptions extends CidCheckOptions>(value: unknown, options: TOptions): InferCheckedCid<TOptions> | null;
export declare function ifCid(value: unknown, options?: CidCheckOptions): Cid | null;
export declare function isCid<TOptions extends CidCheckOptions>(value: unknown, options: TOptions): value is InferCheckedCid<TOptions>;
export declare function isCid(value: unknown, options?: CidCheckOptions): value is Cid;
/**
 * Coerces the input value to a Cid, or throws if not possible.
 */
export declare function asCid<TOptions extends CidCheckOptions>(value: unknown, options: TOptions): InferCheckedCid<TOptions>;
export declare function asCid(value: unknown, options?: CidCheckOptions): Cid;
/**
 * Parses a CID string into a Cid object.
 *
 * @throws if the input is not a valid CID string.
 */
export declare function parseCid<TOptions extends CidCheckOptions>(input: string, options: TOptions): InferCheckedCid<TOptions>;
export declare function parseCid(input: string, options?: CidCheckOptions): Cid;
/**
 * Decodes a CID from its binary representation.
 *
 * @see {@link https://dasl.ing/cid.html DASL-CIDs}
 * @throws if the input do not represent a valid DASL {@link Cid}
 */
export declare function decodeCid<TOptions extends CidCheckOptions>(cidBytes: Uint8Array, options: TOptions): InferCheckedCid<TOptions>;
export declare function decodeCid(cidBytes: Uint8Array, options?: CidCheckOptions): Cid;
export declare function validateCidString(input: string, options?: CidCheckOptions): boolean;
export declare function parseCidString<TOptions extends CidCheckOptions>(input: string, options: TOptions): InferCheckedCid<TOptions> | undefined;
export declare function parseCidString(input: string, options?: CidCheckOptions): Cid | undefined;
export declare function ensureValidCidString(input: string, options?: CidCheckOptions): void;
/**
 * Verifies whether the multihash of a given {@link cid} matches the hash of the provided {@link bytes}.
 * @params cid The CID to match against the bytes.
 * @params bytes The bytes to verify.
 * @returns true if the CID matches the bytes, false otherwise.
 */
export declare function isCidForBytes(cid: Cid, bytes: Uint8Array): Promise<boolean>;
export declare function cidForCbor(bytes: Uint8Array): Promise<CborCid>;
export declare function cidForRawBytes(bytes: Uint8Array): Promise<RawCid>;
export declare function cidForRawHash(hash: Uint8Array): RawCid;
//# sourceMappingURL=cid.d.ts.map