---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Headline from '~/components/ui/Headline.astro';

const {
  title = await Astro.slots.render('title'), // Main headline
  sections = [], // Array of { subtitle, text?, bullets? }
  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;
---

<WidgetWrapper
  id={id}
  isDark={isDark}
  containerClass={`max-w-5xl mx-auto ${classes?.container ?? ''}`}
  bg={bg}
>
  <!-- Main Headline -->
  <Headline
    title={title}
    classes={{
      container: 'text-center mb-12',
      title: 'text-4xl md:text-5xl font-bold tracking-tighter font-heading',
    }}
  />

  <!-- Sections -->
  <div class="space-y-10 max-w-3xl mx-auto text-center">
    {sections.map((section, index) => (
      <div key={index} class="md:text-center">
        <h3 class="text-2xl font-semibold dark:text-white mb-2">{section.subtitle}</h3>

        {/* Optional plain text with <br /> support */}
        {section.text && (
          <p
            class="text-lg text-muted dark:text-slate-400 mb-2"
            set:html={section.text}
          />
        )}

        {/* Optional bullet points - left aligned only */}
        {section.bullets && section.bullets.length > 0 && (
          <div class="text-left inline-block mx-auto">
            <ul class="list-disc list-inside text-lg text-muted dark:text-slate-400 space-y-1">
              {section.bullets.map((bullet, i) => (
                <li key={i}>{bullet}</li>
              ))}
            </ul>
          </div>
        )}
      </div>
    ))}
  </div>
</WidgetWrapper>
